# ุฑุงูููุง ฺฉุงูู ูุตุจ ู ุงุฌุฑุง Onyx

## ๐ ุฎูุงุตู

ุงู ูพุฑูฺู **Onyx** - ฺฉ ูพูุชูุฑู AI ูุชูโุจุงุฒ ุจุฑุง ฺุช ุจุง ููุด ูุตููุน ูุณุช ฺฉู:
- โ ุงุฒ ูุฑ LLM-ุง ูพุดุชุจุงู ูโฺฉูู (OpenAI, Claude, Gemini, Ollama, ู...)
- โ ุฌุณุชุฌู ููุดููุฏ ุฏุฑ ุงุณูุงุฏ (RAG)
- โ ฺฉุงููุงู ุฎูุฏูุฒุจุงู (Self-hosted)
- โ ุจุฏูู ูุงุฒ ุจู GPU (ุจุง ุงุณุชูุงุฏู ุงุฒ API ูุง cloud)

## ๐ ูุตุจ ุณุฑุน (ุชูุตู ูโุดู)

### ูพุดโูุงุฒูุง

1. **Docker ู Docker Compose**
   - ูููฺฉุณ: `sudo apt-get install docker.io docker-compose-plugin`
   - macOS: ูุตุจ [Docker Desktop](https://www.docker.com/products/docker-desktop/)
   - Windows: ูุตุจ [Docker Desktop](https://www.docker.com/products/docker-desktop/)

2. **ุญุฏุงูู ููุงุจุน ุณุณุชู:**
   - RAM: 8GB
   - ูุถุง ุฏุณฺฉ: 20GB
   - CPU: 4 cores

### ูุฑุงุญู ูุตุจ

#### 1. ฺฉููู ฺฉุฑุฏู ูพุฑูฺู (ุงฺฏุฑ ูููุฒ ูฺฉุฑุฏุฏ)

\`\`\`bash
git clone https://github.com/TahaHosseinpour/onyx.git
cd onyx
\`\`\`

#### 2. ุงุฌุฑุง ูพุฑูฺู

\`\`\`bash
cd deployment/docker_compose

# ูุงู .env ุงุฒ ูุจู ุขูุงุฏู ุดุฏู ุงุณุช!
# ุงฺฏุฑ ูโุฎูุงูุฏ ุชูุธูุงุช ุฑุง ุชุบุฑ ุฏูุฏุ ูุงู .env ุฑุง ูุฑุงุด ฺฉูุฏ

# ุงุฌุฑุง ุชูุงู ุณุฑูุณโูุง
docker compose up -d

# ูุดุงูุฏู ูุงฺฏโูุง
docker compose logs -f
\`\`\`

#### 3. ุจุงุฒ ฺฉุฑุฏู ุจุฑูุงูู

- ุจู ุขุฏุฑุณ http://localhost:3000 ุจุฑูุฏ
- ฺูุฏ ุฏููู ุตุจุฑ ฺฉูุฏ ุชุง ุชูุงู ุณุฑูุณโูุง ุขูุงุฏู ุดููุฏ (ุงููู ุจุงุฑ ููฺฉูู 3-5 ุฏููู ุทูู ุจฺฉุดู)

#### 4. ุชูุธู LLM Provider

ุจุนุฏ ุงุฒ ุงุฌุฑุง ุจุฑูุงูู:

1. ูุงุฑุฏ ุชูุธูุงุช Admin ุดูุฏ: http://localhost:3000/admin/configuration
2. ุจู ุชุจ **"LLM Providers"** ุจุฑูุฏ
3. ุฏฺฉูู **"+ Add Provider"** ุฑุง ุจุฒูุฏ
4. ุงุทูุงุนุงุช ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:

\`\`\`
Provider Name: Metis AI
Provider Type: OpenAI
API Key: tpsg-ATDlOuvhdFEWjHUb4vHf56bU66LwoGi
API Base URL: https://api.metisai.ir/openai/v1
Default Model: gpt-4o
Fast Model: gpt-4o-mini
\`\`\`

5. ุฐุฎุฑู ฺฉุฑุฏู ู ุจู ุนููุงู Default ุงูุชุฎุงุจ ฺฉูุฏ

## ๐ง ุฏุณุชูุฑุงุช ููุฏ

### ูุฏุฑุช Docker Compose

\`\`\`bash
cd deployment/docker_compose

# ุดุฑูุน ุชูุงู ุณุฑูุณโูุง
docker compose up -d

# ูุชููู ฺฉุฑุฏู ุชูุงู ุณุฑูุณโูุง
docker compose down

# ูุดุงูุฏู ูุถุนุช ุณุฑูุณโูุง
docker compose ps

# ูุดุงูุฏู ูุงฺฏโูุง ฺฉ ุณุฑูุณ ุฎุงุต
docker compose logs -f api_server
docker compose logs -f web_server

# ุฑุณุชุงุฑุช ฺฉุฑุฏู ฺฉ ุณุฑูุณ ุฎุงุต
docker compose restart api_server

# ูพุงฺฉ ฺฉุฑุฏู ููู ฺุฒ (ุดุงูู ุฏุงุฏูโูุง)
docker compose down -v
\`\`\`

### ุฏุจุงฺฏ

\`\`\`bash
# ฺฺฉ ฺฉุฑุฏู ุงูฺฉู PostgreSQL ุขูุงุฏู ูุณุช
docker compose exec relational_db pg_isready

# ูุงุฑุฏ ุดุฏู ุจู PostgreSQL
docker compose exec relational_db psql -U postgres

# ฺฺฉ ฺฉุฑุฏู Redis
docker compose exec cache redis-cli ping

# ฺฺฉ ฺฉุฑุฏู Vespa
curl http://localhost:8081/state/v1/health

# ูุดุงูุฏู ุงุณุชูุงุฏู ุงุฒ ููุงุจุน
docker stats
\`\`\`

## โ๏ธ ุชูุธูุงุช ูพุดุฑูุชู

### ุชุบุฑ ูพูุฑุช

ูุงู `.env` ุฑุง ูุฑุงุด ฺฉูุฏ:

\`\`\`bash
# ูพูุฑุช ุงุตู ุจุฑูุงูู
HOST_PORT=3000

# ุจุฑุง ุชุบุฑ ุจู ูพูุฑุช 8000:
HOST_PORT=8000
\`\`\`

ุจุนุฏ ุงุฒ ุชุบุฑ:
\`\`\`bash
docker compose down
docker compose up -d
\`\`\`

### ูุนุงู ฺฉุฑุฏู Authentication

ูุงู `.env` ุฑุง ูุฑุงุด ฺฉูุฏ:

\`\`\`bash
# ุชุบุฑ ุงู ุฎุท:
AUTH_TYPE=disabled

# ุจู:
AUTH_TYPE=basic
REQUIRE_EMAIL_VERIFICATION=true
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
\`\`\`

### ุงุณุชูุงุฏู ุงุฒ API Key ุดุฎุต Metis AI

1. ุจู https://metisai.ir ุจุฑูุฏ
2. ุซุจุชโูุงู ฺฉูุฏ ู API Key ุจฺฏุฑุฏ
3. ุฏุฑ ูุงู `.env` ุงู ุฎุท ุฑุง ุชุบุฑ ุฏูุฏ:

\`\`\`bash
OPENAI_API_KEY=your-metis-api-key-here
\`\`\`

## ๐ ูุนูุงุฑ ุณุณุชู

ูพุฑูฺู ุงุฒ ุงู ุณุฑูุณโูุง ุชุดฺฉู ุดุฏู:

- **web_server** (Next.js): ุฑุงุจุท ฺฉุงุฑุจุฑ - ูพูุฑุช 3000
- **api_server** (FastAPI): ุจฺฉโุงูุฏ API - ูพูุฑุช 8080
- **background**: ฺฉุงุฑูุง ูพุณโุฒููู (Celery)
- **relational_db** (PostgreSQL): ูพุงฺฏุงู ุฏุงุฏู ุงุตู - ูพูุฑุช 5432
- **index** (Vespa): ููุชูุฑ ุฌุณุชุฌู - ูพูุฑุช 8081, 19071
- **cache** (Redis): ฺฉุด - ูพูุฑุช 6379
- **minio**: ุฐุฎุฑูโุณุงุฒ ูุงู - ูพูุฑุช 9000, 9001
- **nginx**: Reverse Proxy - ูพูุฑุช 80

## ๐ ูฺฺฏโูุง Metis AI

ุงู ูพุฑูฺู ุจุง **Metis AI** ูพฺฉุฑุจูุฏ ุดุฏู ฺฉู ูุฒุงุง ุฒุฑ ุฑู ุฏุงุฑู:

- โ **ุจุฏูู ููุชุฑุดฺฉู**: ุฏุณุชุฑุณ ูุณุชูู ุงุฒ ุงุฑุงู
- โ **ูพุฑุฏุงุฎุช ุฑุงู**: ูุงุฒ ุจู ุงุฑุฒ ุฎุงุฑุฌ ูุณุช
- โ **ุณุฑุนุช ุจุงูุง**: ุณุฑูุฑูุง ูุฒุฏฺฉ ุจู ุงุฑุงู
- โ **ุณุงุฒฺฏุงุฑ ุจุง OpenAI**: ููุงู API ู ฺฉุชุงุจุฎุงููโูุง
- โ **ุฏุณุชุฑุณ ุจู ูุฏูโูุง ุฌุฏุฏ**: GPT-4o, GPT-4o-mini, Claude, Gemini ู...

## ๐ ุนุจโุงุจ

### ุฎุทุง: Port already in use

\`\`\`bash
# ฺฺฉ ฺฉุฑุฏู ฺู ฺุฒ ุงุฒ ูพูุฑุช 3000 ุงุณุชูุงุฏู ูโฺฉูู
sudo lsof -i :3000

# ฺฉุดุชู ูพุฑูุณู
sudo kill -9 <PID>
\`\`\`

### ุฎุทุง: Docker daemon not running

\`\`\`bash
# ูููฺฉุณ
sudo systemctl start docker

# macOS/Windows
# Docker Desktop ุฑู ุจุงุฒ ฺฉูุฏ
\`\`\`

### ุจุฑูุงูู ุฎู ฺฉูุฏู ุง ฺฉุฑุด ูโฺฉูู

1. ููุงุจุน Docker ุฑุง ุงูุฒุงุด ุฏูุฏ (Settings โ Resources)
2. ุญุฏุงูู 8GB RAM ู 4 CPU ุงุฎุชุตุงุต ุฏูุฏ
3. ูุถุง ุฏุณฺฉ ุฑุง ฺฺฉ ฺฉูุฏ: `docker system df`
4. ูพุงฺฉ ฺฉุฑุฏู cache: `docker system prune -a`

### Embedding ุง LLM ฺฉุงุฑ ููโฺฉูู

1. API Key ุฑุง ฺฺฉ ฺฉูุฏ
2. ูุงฺฏโูุง api_server ุฑุง ุจุจูุฏ: `docker compose logs -f api_server`
3. ุงุชุตุงู ุจู metisai.ir ุฑุง ุชุณุช ฺฉูุฏ:
   \`\`\`bash
   curl https://api.metisai.ir/openai/v1/models \\
     -H "Authorization: Bearer YOUR_API_KEY"
   \`\`\`

## ๐ ููุงุจุน ุจุดุชุฑ

- [ูุณุชูุฏุงุช Onyx](https://docs.onyx.app/)
- [ุฑุงูููุง Metis AI](./METIS_AI_SETUP.md)
- [GitHub Onyx](https://github.com/onyx-dot-app/onyx)
- [Discord ุงูุฌูู Onyx](https://discord.gg/TDJ59cGV2X)

## ๐ ูููู ุจุงุดุฏ!

ุงฺฏุฑ ูุดฺฉู ุฏุงุดุชุฏุ ูุงฺฏโูุง ุฑู ฺฺฉ ฺฉูุฏ ุง ุฏุฑ Discord ุณูุงู ุจูพุฑุณุฏ.

